# 統計分析・グラフ機能 - 使用ガイド

## 🎯 機能概要

統計分析機能は、AI監視システムの運用状況を視覚的に分析できる包括的なダッシュボードです。投稿データの時系列変化、リスク分布、ユーザー活動パターンを多角的に分析できます。

## 🚀 アクセス方法

**URL**: http://localhost:3000/analytics

サイドバーの「分析」メニューからアクセスできます。

## 📊 主要機能

### 1. サマリーカード

システム全体の主要指標を一目で確認できます。

```
┌─────────────┬─────────────┬─────────────┬─────────────┐
│  総投稿数   │ 期間内投稿数 │ 1日平均投稿 │ リスク検出数 │
│    1,234    │     456     │     15      │     89      │
└─────────────┴─────────────┴─────────────┴─────────────┘
```

### 2. 投稿数推移（エリアチャート）

日別の投稿数とステータス別の内訳を積み上げエリアチャートで表示。

**表示項目**:
- 承認済み（緑）
- レビュー待ち（オレンジ）  
- 拒否済み（赤）

**期間選択**: 過去7日/30日/90日間

### 3. ステータス分布（パイチャート）

全投稿のステータス分布を円グラフで視覚化。
- 各セグメントに投稿数と割合を表示
- カラーコードでステータスを識別

### 4. AIスコア分布（バーチャート）

AIリスクスコアの分布を6段階で表示。
- 0.0-0.1: 極めて安全
- 0.1-0.3: 安全
- 0.3-0.5: 軽微な注意
- 0.5-0.7: 中程度のリスク
- 0.7-0.9: 高リスク
- 0.9-1.0: 極めて高リスク

### 5. リスクタイプ分布（バーチャート）

検出されたリスクカテゴリ別の件数。
- 誹謗中傷
- ネタバレ
- 不適切コンテンツ
- ブランド毀損
- スパム
- 個人情報
- 編集・校正指摘

### 6. 時間別投稿パターン（複合チャート）

24時間の投稿パターンを複合チャートで表示。
- **棒グラフ**: 時間別投稿数
- **折れ線グラフ**: 平均AIスコア

ユーザーの活動時間帯と問題投稿の傾向を分析可能。

### 7. ユーザー活動ランキング

最もアクティブなユーザートップ10を表形式で表示。

| ユーザーID | 投稿数 | 平均スコア | 承認/待機/拒否 |
|-----------|--------|-----------|---------------|
| user_001  | 25     | 0.15      | 20/3/2        |
| user_002  | 18     | 0.45      | 12/4/2        |

**表示項目**:
- ユーザーID
- 投稿数
- 平均AIスコア（カラーコード付き）
- ステータス別内訳（チップ表示）

### 8. 漫画別投稿ランキング

投稿数の多い作品トップ10を表形式で表示。

**表示項目**:
- 作品名
- 投稿数
- 平均AIスコア
- ステータス別内訳

## 🔄 データ更新

### 自動更新
- **更新間隔**: 1分間隔で自動更新
- **リアルタイム反映**: 新規投稿が即座に統計に反映

### 手動更新
- ページリロードで即座にデータ更新
- 期間変更時の自動再取得

## 📈 活用場面

### 1. 定期運用レポート
```
週次/月次でのシステム状況確認:
- 投稿数の増減トレンド
- 問題投稿の発生パターン
- ユーザー行動の変化
```

### 2. 問題の早期発見
```
異常値の検出:
- 特定時間帯での問題投稿急増
- 特定ユーザーの異常行動
- 特定作品での炎上兆候
```

### 3. システム改善
```
データドリブンな改善:
- AI判定精度の評価
- 自動承認/拒否閾値の調整
- リソース配分の最適化
```

### 4. ビジネス分析
```
コンテンツ戦略の立案:
- 人気作品の把握
- ユーザーエンゲージメント分析
- 投稿トレンドの把握
```

## 💡 効果的な使い方

### トレンド分析
```
1. 期間を30日に設定
2. 投稿数推移チャートでトレンド確認
3. 異常な増減があれば詳細調査
4. 時間別パターンで活動時間帯を把握
```

### リスク分析
```
1. リスクタイプ分布で主要な問題を特定
2. AIスコア分布で判定精度を確認
3. 高リスクユーザーのリストアップ
4. 問題作品の特定と対策検討
```

### パフォーマンス監視
```
1. サマリーカードで全体状況を把握
2. 1日平均投稿数で負荷状況を確認
3. リスク検出率でAI性能を評価
4. レビュー待ち数で作業負荷を把握
```

## 📊 グラフの読み方

### エリアチャート
- **積み上げ表示**: 全体の投稿数と内訳を同時に把握
- **色分け**: 承認（緑）、待機（オレンジ）、拒否（赤）
- **トレンド**: 右肩上がりは投稿増、下がりは減少

### パイチャート
- **割合表示**: 全体に対する各ステータスの比率
- **健全指標**: 承認済みが80%以上なら健全
- **問題指標**: 拒否済みが20%以上なら要注意

### バーチャート
- **比較表示**: カテゴリ間の相対的な大きさ
- **異常検知**: 突出して高い項目に注目
- **分布確認**: データの偏りや集中を把握

## ⚠️ 注意事項

### データ制限
- 表示データは設定期間内のみ
- 大量データ表示時の性能考慮
- リアルタイム更新による負荷

### 解釈の注意
- 短期間のデータでの判断は避ける
- 季節要因やイベント要因を考慮
- 複数指標の総合的な判断が重要

### システム負荷
- 大量データ表示時の応答時間
- 同時アクセス時の性能低下
- データベース負荷の監視

## 🔧 カスタマイズ

### 期間設定
```javascript
// 期間選択の追加
<Select value={period} onChange={setPeriod}>
  <MenuItem value={7}>過去7日間</MenuItem>
  <MenuItem value={30}>過去30日間</MenuItem>
  <MenuItem value={90}>過去90日間</MenuItem>
  <MenuItem value={365}>過去1年間</MenuItem> // 追加例
</Select>
```

### 色設定
```javascript
// カラーテーマの変更
const statusColors = {
  approved: '#4CAF50',   // 緑
  pending: '#FF9800',    // オレンジ  
  rejected: '#F44336'    // 赤
};
```

### グラフオプション
```javascript
// チャートの詳細設定
<ResponsiveContainer width="100%" height={400}> // 高さ調整
<Tooltip formatter={(value, name) => [value, name]} />
<Legend wrapperStyle={{ paddingTop: '20px' }} />
```

## 🚀 今後の拡張予定

### 高度な分析
- [ ] 相関分析（ユーザー属性と投稿傾向）
- [ ] 予測分析（投稿数予測、リスク予測）
- [ ] 異常検知（統計的異常値の自動検出）

### 可視化の拡張
- [ ] ヒートマップ（時間×曜日の投稿パターン）
- [ ] ツリーマップ（階層的データの表示）
- [ ] ネットワーク図（ユーザー関係性）

### エクスポート機能
- [ ] PDF/Excel形式でのレポート出力
- [ ] グラフ画像の保存
- [ ] 定期レポートの自動生成

### インタラクティブ機能
- [ ] グラフクリックでの詳細データ表示
- [ ] ドリルダウン分析
- [ ] リアルタイムアラート機能

この統計分析機能により、AI監視システムの運用状況を包括的に把握し、データドリブンな意思決定が可能になります。